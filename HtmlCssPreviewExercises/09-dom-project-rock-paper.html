<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Paper Scissor</title>
</head>
<body>
  <p>Rock Paper Scissor</p>

  <!-- Rock -->
  <button onclick="
    playGame('Rock');
  ">Rock âœŠğŸ»</button>

  <!-- Paper -->
  <button onclick="
    playGame('Paper');
  ">Paper ğŸ–ğŸ»</button>

  <!-- Scissor -->
  <button onclick="
    playGame('Scissor');
  ">Scissor âœŒğŸ»</button>

  <p class="js-result"></p>
  <p class="js-move"></p>
  <p class="js-score"></p>

  <!-- Reset -->
   <button onclick="
     score.Wins = 0;
     score.Losses = 0;
     score.Tie = 0;
     localStorage.removeItem('score');
     updateScoreElement()
   ">Reset ğŸ”„ï¸</button>

  <script>

    // and here we can get the items and store in the local store (variable).
    let score = JSON.parse(localStorage.getItem('score')) || {
        Wins: 0,
        Losses: 0,
        Tie: 0
    };

    updateScoreElement()


    // if(score === null) {
    //     score = {
    //       Wins: 0,
    //       Losses: 0,
    //       Tie: 0
    //     };
    // }

    function playGame(playerMove) {
        const computerMove = pickComputerMove();
        let result = '';

        if(playerMove === 'Scissor') {
            if (computerMove === 'Rock') {
            result = 'You lose.';
            } else if (computerMove === 'Paper') {
            result = 'You win.';
            } else if (computerMove === 'Scissor') {
            result = 'Tie.';
            }

        } else if(playerMove === 'Paper') {
            if (computerMove === 'Rock') {
            result = 'You win.';
            } else if (computerMove === 'Paper') {
            result = 'Tie.';
            } else if (computerMove === 'Scissor') {
            result = 'You lose.';
            }
            
        } else if(playerMove === 'Rock') {
            if (computerMove === 'Rock') {
            result = 'Tie.';
            } else if (computerMove === 'Paper') {
            result = 'You lose.';
            } else if (computerMove === 'Scissor') {
            result = 'You win.';
            }
        }

        if(result === 'You win.') {
            score.Wins += 1;
        } else if(result === 'You lose.') {
            score.Losses += 1;
        } else if(result === 'Tie.') {
            score.Tie += 1;
        }
        
        // localStorage to store the data.
        // if we refresh the page the data can't be vanish.
        // in localStorage its only supports string
        // so we have to convert the object into string with the help of JSON.stringify
        localStorage.setItem('score', JSON.stringify(score));

        updateScoreElement()

        document.querySelector('.js-result').innerHTML = result;

        document.querySelector('.js-move').innerHTML = `You ${playerMove} - ${computerMove} Computer`;

        // alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}
        // Wins: ${score.Wins}, Losses: ${score.Losses}, Tie: ${score.Tie}`);
    }

    function updateScoreElement() {
        document.querySelector('.js-score').innerHTML = `Wins: ${score.Wins}, Losses: ${score.Losses}, Tie: ${score.Tie}`
    }

    function pickComputerMove() {
      const randomNumber = Math.random();
      let computerMove = '';

      if (randomNumber >= 0 && randomNumber < 1 / 3) {
        computerMove = 'Rock';
      } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
        computerMove = 'Paper';
      } else {
        computerMove = 'Scissor';
      }

      return computerMove;
    }
  </script>
</body>
</html>
